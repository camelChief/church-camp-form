import{B as o,M as F,A as N,aj as S,ak as L,al as B,am as M,G as O,F as y,z as D,X as p,an as m,ao as Y,ap as R,aq as j,ar as q,I as x,as as z,at as G,au as H,e as P,ag as U}from"./C2THk1Zg.js";function Z(f,t,l=!1){o&&F();var s=f,e=null,a=null,r=Y,d=l?S:0,c=!1;const _=(u,i=!0)=>{c=!0,k(i,u)};var n=null;function b(){n!==null&&(n.lastChild.remove(),s.before(n),n=null);var u=r?e:a,i=r?a:e;u&&j(u),i&&q(i,()=>{r?a=null:e=null})}const k=(u,i)=>{if(r===(r=u))return;let T=!1;if(o){const C=L(s)===B;!!r===C&&(s=M(),O(s),y(!1),T=!0)}var g=R(),v=s;if(g&&(n=document.createDocumentFragment(),n.append(v=D())),r?e??=i&&p(()=>i(v)):a??=i&&p(()=>i(v)),g){var h=m,A=r?e:a,E=r?a:e;A&&h.skipped_effects.delete(A),E&&h.skipped_effects.add(E),h.add_callback(b)}else b();T&&y(!0)};N(()=>{c=!1,t(_),c||k(null,null)},d),o&&(s=x)}function w(f,t,l){o&&F();var s=f,e,a,r=null,d=null;function c(){a&&(q(a),a=null),r&&(r.lastChild.remove(),s.before(r),r=null),a=d,d=null}N(()=>{if(e!==(e=t())){var _=R();if(e){var n=s;_&&(r=document.createDocumentFragment(),r.append(n=D()),a&&m.skipped_effects.add(a)),d=p(()=>l(n,e))}_?m.add_callback(c):c()}},S),o&&(s=x)}function I(f,t){return f===t||f?.[U]===t}function J(f={},t,l,s){return z(()=>{var e,a;return G(()=>{e=a,a=s?.()||[],P(()=>{f!==l(...a)&&(t(f,...a),e&&I(l(...e),f)&&t(null,...e))})}),()=>{H(()=>{a&&I(l(...a),f)&&t(null,...a)})}}),f}export{J as b,w as c,Z as i};
